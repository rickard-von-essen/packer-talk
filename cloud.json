{
  "variables": {
    "di_image": "centos-7-2-x64",
    "di_region": "ams3",
    "di_size": "512mb",
    "aws_source_ami": "ami-7abd0209",
    "gce_proj": "packer-test-141600",
    "gce_source_image": "centos-7-v20160803",
    "os_source_image": "88c4e4d9-1cc1-46b6-803e-ef1334fb6eb7"
  },
  "builders": [
    {
      "type": "digitalocean",
      "ssh_pty": "true",
      "image": "{{user `di_image`}}",
      "region": "{{user `di_region`}}",
      "size": "{{user `di_size`}}"
    },
    {
      "type": "openstack",
      "ssh_username": "centos",
      "ssh_pty": "true",
      "image_name": "packer-demo-{{timestamp}}",
      "source_image": "{{user `os_source_image`}}",
      "flavor": "m1.tiny",
      "floating_ip_pool": "ext-net-01"
    },
    {
      "type": "amazon-ebs",
      "region": "eu-west-1",
      "source_ami": "{{user `aws_source_ami`}}",
      "instance_type": "t2.nano",
      "ssh_username": "centos",
      "ssh_pty": "true",
      "ami_name": "packer-demo-{{timestamp}}",
      "tags": {
        "OS_Version": "CentOS",
        "Release": "Latest"
      }
    },
    {
      "type": "googlecompute",
      "project_id": "{{ user `gce_proj` }}",
      "source_image": "{{ user `gce_source_image` }}",
      "zone": "europe-west1-b",
      "ssh_username": "centos",
      "ssh_pty": "true",
      "image_name": "packer-demo-{{timestamp}}"
    }
  ],
  "provisioners": [
    {
      "type": "shell",
      "execute_command": "{{.Vars}} /bin/sh -x '{{.Path}}'",
      "script": "scripts/cloud/puppet_install.sh"
    }
  ]
}
